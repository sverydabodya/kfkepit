import { FC } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import classes from './UI-HomePage/PostDetail.module.scss';
import Header from "./UI-HomePage/Header/Header";
import Footer from "./UI/Footer/Footer";

interface Post {
    content: string | TrustedHTML;
    id: number;
    title: string;
    text: string;
    date: string;
    img: string | ArrayBuffer | null;
}

const PostDetail: FC = () => {
    const location = useLocation();
    const navigate = useNavigate();

    const post = location.state?.post as Post | undefined;

    if (!post) {
        return <div className={classes.wrapper}>
            <Header />
            <main className={classes.main}>
                <div className={classes.main__error}>Пост не знайдено</div>
            </main>
            <Footer className='footer' />
        </div>;
    }
    return (
        <div className={classes.wrapper}>
            <Header />
            <main className={classes.main}>
                <div className={classes.main__container}>
                    <button className={classes.post__button} onClick={() => navigate(-1)}>Назад</button>
                    <h1 className={classes.post__title}>{post.title}</h1>
                    <div className={classes.post__date}>{post.date}</div>
                    <div className={classes.post__socials}>
                        <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M7.25 0H17.75C21.75 0 25 3.25 25 7.25V17.75C25 19.6728 24.2362 21.5169 22.8765 22.8765C21.5169 24.2362 19.6728 25 17.75 25H7.25C3.25 25 0 21.75 0 17.75V7.25C0 5.32718 0.763837 3.48311 2.12348 2.12348C3.48311 0.763837 5.32718 0 7.25 0ZM7 2.5C5.80653 2.5 4.66193 2.97411 3.81802 3.81802C2.97411 4.66193 2.5 5.80653 2.5 7V18C2.5 20.4875 4.5125 22.5 7 22.5H18C19.1935 22.5 20.3381 22.0259 21.182 21.182C22.0259 20.3381 22.5 19.1935 22.5 18V7C22.5 4.5125 20.4875 2.5 18 2.5H7ZM19.0625 4.375C19.4769 4.375 19.8743 4.53962 20.1674 4.83265C20.4604 5.12567 20.625 5.5231 20.625 5.9375C20.625 6.3519 20.4604 6.74933 20.1674 7.04235C19.8743 7.33538 19.4769 7.5 19.0625 7.5C18.6481 7.5 18.2507 7.33538 17.9576 7.04235C17.6646 6.74933 17.5 6.3519 17.5 5.9375C17.5 5.5231 17.6646 5.12567 17.9576 4.83265C18.2507 4.53962 18.6481 4.375 19.0625 4.375ZM12.5 6.25C14.1576 6.25 15.7473 6.90848 16.9194 8.08058C18.0915 9.25268 18.75 10.8424 18.75 12.5C18.75 14.1576 18.0915 15.7473 16.9194 16.9194C15.7473 18.0915 14.1576 18.75 12.5 18.75C10.8424 18.75 9.25268 18.0915 8.08058 16.9194C6.90848 15.7473 6.25 14.1576 6.25 12.5C6.25 10.8424 6.90848 9.25268 8.08058 8.08058C9.25268 6.90848 10.8424 6.25 12.5 6.25ZM12.5 8.75C11.5054 8.75 10.5516 9.14509 9.84835 9.84835C9.14509 10.5516 8.75 11.5054 8.75 12.5C8.75 13.4946 9.14509 14.4484 9.84835 15.1517C10.5516 15.8549 11.5054 16.25 12.5 16.25C13.4946 16.25 14.4484 15.8549 15.1517 15.1517C15.8549 14.4484 16.25 13.4946 16.25 12.5C16.25 11.5054 15.8549 10.5516 15.1517 9.84835C14.4484 9.14509 13.4946 8.75 12.5 8.75Z" fill="black"/>
                        </svg>
                        <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M25 12.5766C25 5.63055 19.4038 0 12.5016 0C5.59617 0.0015623 0 5.63055 0 12.5781C0 18.8539 4.5713 24.0564 10.5456 25V16.212H7.37408V12.5781H10.5487V9.80503C10.5487 6.65386 12.4156 4.91345 15.27 4.91345C16.6385 4.91345 18.0681 5.15873 18.0681 5.15873V8.25209H16.4917C14.9403 8.25209 14.456 9.22229 14.456 10.2175V12.5766H17.9212L17.3681 16.2105H14.4544V24.9984C20.4287 24.0548 25 18.8523 25 12.5766Z" fill="black"/>
                        </svg>
                        <svg width="21" height="25" viewBox="0 0 21 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16.6607 3.91667C15.7452 2.83281 15.2407 1.44088 15.2411 0H11.1027V17.2222C11.0708 18.1542 10.6913 19.037 10.0443 19.6846C9.39731 20.3323 8.53319 20.6943 7.63393 20.6944C5.73214 20.6944 4.15179 19.0833 4.15179 17.0833C4.15179 14.6944 6.375 12.9028 8.66518 13.6389V9.25C4.04464 8.61111 0 12.3333 0 17.0833C0 21.7083 3.69643 25 7.62054 25C11.8259 25 15.2411 21.4583 15.2411 17.0833V8.34722C16.9192 9.59701 18.934 10.2676 21 10.2639V5.97222C21 5.97222 18.4821 6.09722 16.6607 3.91667Z" fill="black"/>
                        </svg>
                        <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12.5 0C5.6 0 0 5.6 0 12.5C0 19.4 5.6 25 12.5 25C19.4 25 25 19.4 25 12.5C25 5.6 19.4 0 12.5 0ZM18.3 8.5C18.1125 10.475 17.3 15.275 16.8875 17.4875C16.7125 18.425 16.3625 18.7375 16.0375 18.775C15.3125 18.8375 14.7625 18.3 14.0625 17.8375C12.9625 17.1125 12.3375 16.6625 11.275 15.9625C10.0375 15.15 10.8375 14.7 11.55 13.975C11.7375 13.7875 14.9375 10.875 15 10.6125C15.0087 10.5727 15.0075 10.5315 14.9966 10.4923C14.9857 10.453 14.9654 10.4171 14.9375 10.3875C14.8625 10.325 14.7625 10.35 14.675 10.3625C14.5625 10.3875 12.8125 11.55 9.4 13.85C8.9 14.1875 8.45 14.3625 8.05 14.35C7.6 14.3375 6.75 14.1 6.1125 13.8875C5.325 13.6375 4.7125 13.5 4.7625 13.0625C4.7875 12.8375 5.1 12.6125 5.6875 12.375C9.3375 10.7875 11.7625 9.7375 12.975 9.2375C16.45 7.7875 17.1625 7.5375 17.6375 7.5375C17.7375 7.5375 17.975 7.5625 18.125 7.6875C18.25 7.7875 18.2875 7.925 18.3 8.025C18.2875 8.1 18.3125 8.325 18.3 8.5Z" fill="black"/>
                        </svg>
                    </div>
                    <div className={classes.post__img}>
                        {post.img && <img src={post.img as string} alt="Post image" />}
                    </div>
                    <div className={classes.post__text} dangerouslySetInnerHTML={{ __html: post.content }} />
                </div>
            </main>
            <Footer className='footer'/>
        </div>
    );
}

export default PostDetail;
